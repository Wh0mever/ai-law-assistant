# üé® –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –§–û–†–ú–ê–¢–ò–†–û–í–ê–ù–ò–Ø –¢–ï–ö–°–¢–ê

## ‚ùå –ü–†–û–ë–õ–ï–ú–ê
- –ñ–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª—Å—è –≤ Telegram
- Perplexity –≤–æ–∑–≤—Ä–∞—â–∞–ª –æ—Ç–≤–µ—Ç—ã –≤ Markdown —Ñ–æ—Ä–º–∞—Ç–µ (`**—Ç–µ–∫—Å—Ç**`)
- Telegram Bot —Ç—Ä–µ–±–æ–≤–∞–ª HTML —Ñ–æ—Ä–º–∞—Ç (`<b>—Ç–µ–∫—Å—Ç</b>`) —Å `parse_mode='HTML'`

## ‚úÖ –†–ï–®–ï–ù–ò–ï

### 1. –î–æ–±–∞–≤–ª–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è Markdown ‚Üí HTML

```python
def _convert_markdown_to_html(self, text: str) -> str:
    """–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç Markdown –∂–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç –≤ HTML –¥–ª—è Telegram"""
    import re
    
    # –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º **—Ç–µ–∫—Å—Ç** –≤ <b>—Ç–µ–∫—Å—Ç</b>
    text = re.sub(r'\*\*(.*?)\*\*', r'<b>\1</b>', text)
    
    # –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º __—Ç–µ–∫—Å—Ç__ –≤ <b>—Ç–µ–∫—Å—Ç</b> (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å)
    text = re.sub(r'__(.*?)__', r'<b>\1</b>', text)
    
    # –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º *—Ç–µ–∫—Å—Ç* –≤ <i>—Ç–µ–∫—Å—Ç</i> (–∫—É—Ä—Å–∏–≤)
    text = re.sub(r'\*(.*?)\*', r'<i>\1</i>', text)
    
    # –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º _—Ç–µ–∫—Å—Ç_ –≤ <i>—Ç–µ–∫—Å—Ç</i> (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –∫—É—Ä—Å–∏–≤)
    text = re.sub(r'_(.*?)_', r'<i>\1</i>', text)
    
    return text
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω –ø—Ä–æ–º–ø—Ç –¥–ª—è Perplexity

**–ë–´–õ–û:**
```
1. –ö–õ–Æ–ß–ï–í–´–ï –°–¢–ê–¢–¨–ò –ó–ê–ö–û–ù–û–í:
   ‚Ä¢ –°—Ç–∞—Ç—å—è X –¢–ö –†–§ - [–æ–ø–∏—Å–∞–Ω–∏–µ]
```

**–°–¢–ê–õ–û:**
```
1. **–ö–õ–Æ–ß–ï–í–´–ï –°–¢–ê–¢–¨–ò –ó–ê–ö–û–ù–û–í:**
   ‚Ä¢ **–°—Ç–∞—Ç—å—è X –¢–ö –†–§** - [–æ–ø–∏—Å–∞–Ω–∏–µ]
```

### 3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö –æ—Ç–≤–µ—Ç–æ–≤

- ‚úÖ –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ `_format_legal_response()`
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤ (–±–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤–æ, —Ç—Ä—É–¥–æ–≤–æ–µ –ø—Ä–∞–≤–æ, –æ–±—â–∏–µ)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã Markdown

## üìã –†–ï–ó–£–õ–¨–¢–ê–¢

**–î–û (–±–µ–∑ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è):**
```
1. –ö–õ–Æ–ß–ï–í–´–ï –°–¢–ê–¢–¨–ò –ó–ê–ö–û–ù–û–í:
–°—Ç–∞—Ç—å—è 610 –ì–ö –†–§ ‚Äî —Ä–µ–≥—É–ª–∏—Ä—É–µ—Ç –¥–æ–≥–æ–≤–æ—Ä –∞—Ä–µ–Ω–¥—ã
–°—Ç–∞—Ç—å—è 619 –ì–ö –†–§ ‚Äî —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –æ—Å–Ω–æ–≤–∞–Ω–∏—è —Ä–∞—Å—Ç–æ—Ä–∂–µ–Ω–∏—è
```

**–ü–û–°–õ–ï (—Å –∂–∏—Ä–Ω—ã–º —à—Ä–∏—Ñ—Ç–æ–º):**
```
1. **–ö–õ–Æ–ß–ï–í–´–ï –°–¢–ê–¢–¨–ò –ó–ê–ö–û–ù–û–í:**
‚Ä¢ **–°—Ç–∞—Ç—å—è 610 –ì–ö –†–§** ‚Äî —Ä–µ–≥—É–ª–∏—Ä—É–µ—Ç –¥–æ–≥–æ–≤–æ—Ä –∞—Ä–µ–Ω–¥—ã  
‚Ä¢ **–°—Ç–∞—Ç—å—è 619 –ì–ö –†–§** ‚Äî —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –æ—Å–Ω–æ–≤–∞–Ω–∏—è —Ä–∞—Å—Ç–æ—Ä–∂–µ–Ω–∏—è
```

## üéØ –ü–û–î–î–ï–†–ñ–ò–í–ê–ï–ú–´–ï –§–û–†–ú–ê–¢–´

| Markdown | HTML | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|----------|------|-----------|
| `**—Ç–µ–∫—Å—Ç**` | `<b>—Ç–µ–∫—Å—Ç</b>` | **–∂–∏—Ä–Ω—ã–π** |
| `__—Ç–µ–∫—Å—Ç__` | `<b>—Ç–µ–∫—Å—Ç</b>` | **–∂–∏—Ä–Ω—ã–π** |
| `*—Ç–µ–∫—Å—Ç*` | `<i>—Ç–µ–∫—Å—Ç</i>` | *–∫—É—Ä—Å–∏–≤* |
| `_—Ç–µ–∫—Å—Ç_` | `<i>—Ç–µ–∫—Å—Ç</i>` | *–∫—É—Ä—Å–∏–≤* |

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò

- **–§–∞–π–ª:** `perplexity_service.py`
- **–§—É–Ω–∫—Ü–∏—è:** `_convert_markdown_to_html()`
- **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ –≤—Å–µ–º –æ—Ç–≤–µ—Ç–∞–º –æ—Ç Perplexity
- **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** –†–∞–±–æ—Ç–∞–µ—Ç —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ `parse_mode='HTML'` –≤ main.py

**–¢–µ–ø–µ—Ä—å –≤—Å–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ –∫–ª—é—á–µ–≤—ã–µ —Ç–µ—Ä–º–∏–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∂–∏—Ä–Ω—ã–º —à—Ä–∏—Ñ—Ç–æ–º!** ‚ú®