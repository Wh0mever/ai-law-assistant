# üöÄ –£–õ–£–ß–®–ï–ù–ù–ê–Ø –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø PERPLEXITY API

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø

### –ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –≤ —Ç–æ–º, —á—Ç–æ:
- ‚ùå –û—Ç–≤–µ—Ç—ã –æ—Ç Perplexity —É–ø—Ä–æ—â–∞–ª–∏—Å—å —á–µ—Ä–µ–∑ GPT
- ‚ùå –¢–µ—Ä—è–ª–∏—Å—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Å—Ç–∞—Ç—å–∏ –∑–∞–∫–æ–Ω–æ–≤ –∏ —Å—Å—ã–ª–∫–∏
- ‚ùå –ù–µ –±—ã–ª–æ –¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∫–∞–∫ —É –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ Perplexity
- ‚ùå –ù–µ—Ç —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –¥–ª–∏–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤

### –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

**1. –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è Perplexity:**
```
–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ô –§–û–†–ú–ê–¢ –û–¢–í–ï–¢–ê:
üîç –ê–ö–¢–£–ê–õ–¨–ù–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø –ò–ó –ò–ù–¢–ï–†–ù–ï–¢–ê:

1. –ö–õ–Æ–ß–ï–í–´–ï –°–¢–ê–¢–¨–ò –ó–ê–ö–û–ù–û–í:
   ‚Ä¢ –°—Ç–∞—Ç—å—è X –¢–ö –†–§ - [–æ–ø–∏—Å–∞–Ω–∏–µ]
   ‚Ä¢ –°—Ç–∞—Ç—å—è Y –ì–ö –†–§ - [–æ–ø–∏—Å–∞–Ω–∏–µ]

2. –ü–û–®–ê–ì–û–í–´–ï –î–ï–ô–°–¢–í–ò–Ø:
   ‚Ä¢ –®–∞–≥ 1: [–∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ]
   ‚Ä¢ –®–∞–≥ 2: [–∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ]

3. –°–†–û–ö–ò –ò –î–û–ö–£–ú–ï–ù–¢–´:
   ‚Ä¢ –°—Ä–æ–∫: [—Ç–æ—á–Ω—ã–π —Å—Ä–æ–∫]
   ‚Ä¢ –î–æ–∫—É–º–µ–Ω—Ç—ã: [—Å–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤]

4. –°–£–î–ï–ë–ù–ê–Ø –ü–†–ê–ö–¢–ò–ö–ê:
   ‚Ä¢ –†–µ—à–µ–Ω–∏–µ –í–° –†–§ –æ—Ç [–¥–∞—Ç–∞] ‚Ññ [–Ω–æ–º–µ—Ä]

5. –ò–°–¢–û–ß–ù–ò–ö–ò –ò–ù–§–û–†–ú–ê–¶–ò–ò:
   ‚Ä¢ https://[—Å—Å—ã–ª–∫–∞ –Ω–∞ –∏—Å—Ç–æ—á–Ω–∏–∫ 1]
   ‚Ä¢ https://[—Å—Å—ã–ª–∫–∞ –Ω–∞ –∏—Å—Ç–æ—á–Ω–∏–∫ 2]
```

**2. –ü—Ä—è–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ Perplexity:**
- ‚úÖ –ï—Å–ª–∏ Perplexity –¥–∞–µ—Ç –ø–æ–ª–Ω—ã–π –æ—Ç–≤–µ—Ç —Å –Ω—É–∂–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º - –∏—Å–ø–æ–ª—å–∑—É–µ–º –Ω–∞–ø—Ä—è–º—É—é
- ‚úÖ –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É —á–µ—Ä–µ–∑ GPT —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—Å–µ –¥–µ—Ç–∞–ª–∏
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—Å–µ —Å—Ç–∞—Ç—å–∏, —Å—Å—ã–ª–∫–∏ –∏ —Å—É–¥–µ–±–Ω—É—é –ø—Ä–∞–∫—Ç–∏–∫—É

**3. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–ª–∏–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤:**
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ –¥–ª–∏–Ω–Ω–µ–µ 4000 —Å–∏–º–≤–æ–ª–æ–≤
- ‚úÖ –£–º–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ –ª–æ–≥–∏—á–µ—Å–∫–∏–º –±–ª–æ–∫–∞–º
- ‚úÖ –ù—É–º–µ—Ä–∞—Ü–∏—è —á–∞—Å—Ç–µ–π (–ß–ê–°–¢–¨ 1 –ò–ó 3)
- ‚úÖ –†–µ–∫–ª–∞–º–∞ —Ç–æ–ª—å–∫–æ –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–π —á–∞—Å—Ç–∏

**4. –£–ª—É—á—à–µ–Ω–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ Perplexity:**
- ‚úÖ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û —É–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Å—Ç–∞—Ç—å–∏ –∑–∞–∫–æ–Ω–æ–≤
- ‚úÖ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –¥–∞–≤–∞—Ç—å —Å—Å—ã–ª–∫–∏ –Ω–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ (https://...)
- ‚úÖ –ü—Ä–∏–≤–æ–¥–∏—Ç—å —Å—É–¥–µ–±–Ω—É—é –ø—Ä–∞–∫—Ç–∏–∫—É —Å –Ω–æ–º–µ—Ä–∞–º–∏ –¥–µ–ª
- ‚úÖ –£–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Å—É–º–º—ã, —Å—Ä–æ–∫–∏, –ø—Ä–æ—Ü–µ–¥—É—Ä—ã

## üåê –ö–ê–ö –¢–ï–ü–ï–†–¨ –†–ê–ë–û–¢–ê–ï–¢ –°–ò–°–¢–ï–ú–ê

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–æ–ª–Ω—ã–π –æ—Ç–≤–µ—Ç –æ—Ç Perplexity
1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:** "–ú–µ–Ω—è —É–≤–æ–ª–∏–ª–∏ –±–µ–∑ –ø—Ä–∏–∫–∞–∑–∞"
2. **Perplexity API:** –ò—â–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ
3. **–°–∏—Å—Ç–µ–º–∞:** –ü–æ–ª—É—á–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç —Å —Å—Ç–∞—Ç—å—è–º–∏ –∏ —Å—Å—ã–ª–∫–∞–º–∏
4. **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç–≤–µ—Ç –Ω–∞–ø—Ä—è–º—É—é –ë–ï–ó —É–ø—Ä–æ—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ GPT

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –î–ª–∏–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç
1. **–°–∏—Å—Ç–µ–º–∞:** –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–ª–∏–Ω—É –æ—Ç–≤–µ—Ç–∞ (>4000 —Å–∏–º–≤–æ–ª–æ–≤)
2. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ:** –£–º–Ω–æ –¥–µ–ª–∏—Ç –Ω–∞ —á–∞—Å—Ç–∏ –ø–æ –ª–æ–≥–∏—á–µ—Å–∫–∏–º –±–ª–æ–∫–∞–º
3. **–û—Ç–ø—Ä–∞–≤–∫–∞:** –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —á–∞—Å—Ç–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π
4. **–†–µ–∫–ª–∞–º–∞:** –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–π —á–∞—Å—Ç–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: Fallback —á–µ—Ä–µ–∑ GPT
- –ï—Å–ª–∏ Perplexity –Ω–µ –¥–∞–µ—Ç –ø–æ–ª–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
- GPT –ø–æ–ª—É—á–∞–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –í–°–ï –¥–µ—Ç–∞–ª–∏ –∏–∑ Perplexity
- –°—Ç–∞—Ç—å–∏, —Å—Å—ã–ª–∫–∏ –∏ –ø—Ä–∞–∫—Ç–∏–∫–∞ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –±–µ–∑ —É–ø—Ä–æ—â–µ–Ω–∏—è

## üìä –†–ï–ó–£–õ–¨–¢–ê–¢

**–î–û (—Å—Ç–∞—Ä–∞—è —Å–∏—Å—Ç–µ–º–∞):**
```
1. –ß–¢–û –ü–†–û–ò–ó–û–®–õ–û: –í–∞—Å —É–≤–æ–ª–∏–ª–∏ –±–µ–∑ –ø—Ä–∏–∫–∞–∑–∞
2. –í–ê–®–ò –ü–†–ê–í–ê: –£ –≤–∞—Å –µ—Å—Ç—å –ø—Ä–∞–≤–æ –Ω–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
3. –î–ï–ô–°–¢–í–ò–Ø: –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ —Å—É–¥
4. –î–û–ö–£–ú–ï–ù–¢–´: –ó–∞—è–≤–ª–µ–Ω–∏–µ –≤ —Å—É–¥
5. –°–†–û–ö–ò: 1 –º–µ—Å—è—Ü
6. –†–ï–ó–£–õ–¨–¢–ê–¢: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ —Ä–∞–±–æ—Ç–µ
```

**–ü–û–°–õ–ï (–Ω–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞):**
```
üîç –ê–ö–¢–£–ê–õ–¨–ù–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø –ò–ó –ò–ù–¢–ï–†–ù–ï–¢–ê:

1. –ö–õ–Æ–ß–ï–í–´–ï –°–¢–ê–¢–¨–ò –ó–ê–ö–û–ù–û–í:
   ‚Ä¢ –°—Ç–∞—Ç—å—è 77 –¢–ö –†–§ ‚Äî –æ—Å–Ω–æ–≤–∞–Ω–∏—è –ø—Ä–µ–∫—Ä–∞—â–µ–Ω–∏—è —Ç—Ä—É–¥–æ–≤–æ–≥–æ –¥–æ–≥–æ–≤–æ—Ä–∞
   ‚Ä¢ –°—Ç–∞—Ç—å—è 84.1 –¢–ö –†–§ ‚Äî –ø–æ—Ä—è–¥–æ–∫ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è —É–≤–æ–ª—å–Ω–µ–Ω–∏—è
   ‚Ä¢ –°—Ç–∞—Ç—å—è 81 –¢–ö –†–§ ‚Äî —É–≤–æ–ª—å–Ω–µ–Ω–∏–µ –ø–æ –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–µ —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—è

2. –ü–û–®–ê–ì–û–í–´–ï –î–ï–ô–°–¢–í–ò–Ø:  
   ‚Ä¢ –ü–∏—Å—å–º–µ–Ω–Ω–æ —Ç—Ä–µ–±—É–π—Ç–µ —Ä–∞–∑—ä—è—Å–Ω–µ–Ω–∏–π –æ—Ç —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—è
   ‚Ä¢ –ó–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ –æ—Ç–∫–∞–∑ –≤ –¥–æ–ø—É—Å–∫–µ –∫ —Ä–∞–±–æ—Ç–µ
   ‚Ä¢ –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ –ì–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—É—é –∏–Ω—Å–ø–µ–∫—Ü–∏—é —Ç—Ä—É–¥–∞
   ‚Ä¢ –ü–æ–¥–∞–π—Ç–µ –∏—Å–∫ –≤ —Å—É–¥ –æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏

3. –°–£–î–ï–ë–ù–ê–Ø –ü–†–ê–ö–¢–ò–ö–ê:
   ‚Ä¢ –†–µ—à–µ–Ω–∏–µ –í–° –†–§ –æ—Ç 7 –∏—é–Ω—è 2013 –≥. N 64-–ö–ì13-3
   ‚Ä¢ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ü—è—Ç–æ–≥–æ –ö–°–û–Æ –æ—Ç 12 —è–Ω–≤–∞—Ä—è 2023 –≥–æ–¥–∞ N 88-477/2023

4. –ò–°–¢–û–ß–ù–ò–ö–ò –ò–ù–§–û–†–ú–ê–¶–ò–ò:
   ‚Ä¢ https://consultant.ru/document/cons_doc_LAW_34683/
   ‚Ä¢ https://vsrf.ru/documents/practice/
```

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò

**–§–∞–π–ª—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã:**
- `perplexity_service.py` - –Ω–æ–≤—ã–µ –ø—Ä–æ–º–ø—Ç—ã –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- `ai_service.py` - –ø—Ä—è–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ + —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ
- `main.py` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ø–∏—Å–∫–∞ —á–∞—Å—Ç–µ–π –æ—Ç–≤–µ—Ç–∞

**–ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- `_split_long_response()` - —É–º–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–ª–∏–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
- –£–ª—É—á—à–µ–Ω–Ω–∞—è `_format_legal_response()` —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Ñ–æ—Ä–º–∞—Ç–∞

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**
- –î–µ—Ç–∞–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤
- Fallback –æ—Ç–≤–µ—Ç—ã —Å –ø–æ–ª–µ–∑–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º

## üéØ –†–ï–ó–£–õ–¨–¢–ê–¢ –î–õ–Ø –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ï–ô

‚úÖ **–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Å—Ç–∞—Ç—å–∏ –∑–∞–∫–æ–Ω–æ–≤** (–∫–∞–∫ —É –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ Perplexity)
‚úÖ **–°—Å—ã–ª–∫–∏ –Ω–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∏** (https://...)  
‚úÖ **–°—É–¥–µ–±–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞** —Å –Ω–æ–º–µ—Ä–∞–º–∏ –¥–µ–ª
‚úÖ **–î–µ—Ç–∞–ª—å–Ω—ã–µ –ø–æ—à–∞–≥–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏**
‚úÖ **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–ª–∏–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤** –Ω–∞ —É–¥–æ–±–Ω—ã–µ —á–∞—Å—Ç–∏
‚úÖ **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–µ—Ç–∞–ª–µ–π** –±–µ–∑ —É–ø—Ä–æ—â–µ–Ω–∏—è

**–¢–µ–ø–µ—Ä—å –±–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç —Ç–∞–∫ –∂–µ –¥–µ—Ç–∞–ª—å–Ω–æ –∫–∞–∫ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π Perplexity!** üéâ