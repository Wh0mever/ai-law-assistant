import os
import logging

class Config:
    """–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"""
    
    # Telegram Bot Token
    BOT_TOKEN = "Your_bot_token_here"
    
    # OpenAI API Key (—Ä–∞–±–æ—á–∏–π –∫–ª—é—á –ø—Ä–æ–µ–∫—Ç–∞)
    OPENAI_API_KEY = "sk-proj***************************************************************rAA"
    
    # Perplexity API Key
    PERPLEXITY_API_KEY = "pplx-l*******************************************"
    
    # GPT –º–æ–¥–µ–ª—å
    GPT_MODEL = "gpt-3.5-turbo"
    
    # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–∞–π–ª–æ–≤
    UPLOAD_DIR = "temp_uploads"
    MAX_FILE_SIZE = 50 * 1024 * 1024  # 50 –ú–ë
    ALLOWED_EXTENSIONS = {'.pdf', '.docx', '.txt', '.doc'}
    
    # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
    LOG_LEVEL = logging.INFO
    LOG_FORMAT = '%(asctime)s - %(name)s - %(levelname)s - %(message)s'
    
    # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Perplexity API
    PERPLEXITY_MODEL = "sonar"  # –ê–∫—Ç—É–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å —Å —è–Ω–≤–∞—Ä—è 2025
    
    # –¢–µ–∫—Å—Ç—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è –∏ –º–µ–Ω—é
    WELCOME_TEXT = """üèõÔ∏è –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ ¬´–í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —é—Ä–∏—Å—Ç¬ª!

‚öñÔ∏è –í–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ —Å –ê–ö–¢–£–ê–õ–¨–ù–û–ô –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞.

üéØ –ß—Ç–æ —è —É–º–µ—é:
üîç –ü–æ–∏—Å–∫ –∞–∫—Ç—É–∞–ª—å–Ω–æ–π —Å—É–¥–µ–±–Ω–æ–π –ø—Ä–∞–∫—Ç–∏–∫–∏ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç
üìù –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∂–∞–ª–æ–± –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–≤–µ–∂–∏—Ö –¥–∞–Ω–Ω—ã—Ö
üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ø–æ –¥–µ–π—Å—Ç–≤—É—é—â–µ–º—É –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤—É
üé§ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (Whisper-1)
üì§ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –±–æ—Ç–æ–º —Å –∫–æ–ª–ª–µ–≥–∞–º–∏

üåê –°–∏—Å—Ç–µ–º–∞ –ø–æ–∏—Å–∫–∞ –≤–∫–ª—é—á–∞–µ—Ç:
‚Ä¢ Perplexity AI –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ
‚Ä¢ –ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç–ü–ª—é—Å, –ì–∞—Ä–∞–Ω—Ç, pravo.gov.ru
‚Ä¢ –ê–∫—Ç—É–∞–ª—å–Ω–∞—è —Å—É–¥–µ–±–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 2024 –≥–æ–¥–∞
‚Ä¢ –°–≤–µ–∂–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–µ –†–§
‚Ä¢ –ü–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ü–ª–µ–Ω—É–º–æ–≤ –í–° –†–§ –∏ –ö–° –†–§

‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
‚Ä¢ –í—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
‚Ä¢ –ü–æ–∏—Å–∫ —á–µ—Ä–µ–∑ –≤–µ–¥—É—â–∏–µ –ø—Ä–∞–≤–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã
‚Ä¢ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π üé§
‚Ä¢ Powered by GPT-3.5 + Perplexity AI
‚Ä¢ –¢–æ—á–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –ø—Ä–∞–≤–∞

üí° –°–æ–≤–µ—Ç: –í—ã –º–æ–∂–µ—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≥–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –≤–∞—à–µ–π —Å–∏—Ç—É–∞—Ü–∏–∏!

–í—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –≤ –º–µ–Ω—é ‚¨áÔ∏è"""

    MENU_BUTTONS = {
        "search_practice": "üîç –°–ø—Ä–æ—Å–∏—Ç—å —é—Ä–∏—Å—Ç–∞ –ò–ò –±–µ—Å–ø–ª–∞—Ç–Ω–æ",
        "prepare_appeal": "üìù –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∞–ø–µ–ª–ª—è—Ü–∏–æ–Ω–Ω–æ–π –∂–∞–ª–æ–±—ã", 
        "check_documents": "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤",
        "share_bot": "üì§ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –±–æ—Ç–æ–º"
    }
    
    TEXTS = {
        "help": """‚ÑπÔ∏è –°–ü–†–ê–í–ö–ê –ü–û –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ –ë–û–¢–ê

üîç –°–ø—Ä–æ—Å–∏—Ç—å —é—Ä–∏—Å—Ç–∞ –ò–ò –±–µ—Å–ø–ª–∞—Ç–Ω–æ:
‚Ä¢ –û–ø–∏—à–∏—Ç–µ –≤–∞—à—É –ø—Ä–∞–≤–æ–≤—É—é —Å–∏—Ç—É–∞—Ü–∏—é —Ç–µ–∫—Å—Ç–æ–º
‚Ä¢ üé§ –ò–ª–∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –≥–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
‚Ä¢ –£–∫–∞–∂–∏—Ç–µ –∫–ª—é—á–µ–≤—ã–µ —Ñ–∞–∫—Ç—ã –¥–µ–ª–∞
‚Ä¢ –ü–æ–ª—É—á–∏—Ç–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—É—é –ø—Ä–∞–∫—Ç–∏–∫—É —Å—É–¥–æ–≤

üìù –ü–û–î–ì–û–¢–û–í–ö–ê –ê–ü–ï–õ–õ–Ø–¶–ò–û–ù–ù–û–ô –ñ–ê–õ–û–ë–´:
‚Ä¢ –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ä–µ—à–µ–Ω–∏–µ —Å—É–¥–∞ (PDF/DOCX)
‚Ä¢ –û–ø–∏—à–∏—Ç–µ –æ—Å–Ω–æ–≤–∞–Ω–∏—è –¥–ª—è –æ–±–∂–∞–ª–æ–≤–∞–Ω–∏—è
‚Ä¢ –ü–æ–ª—É—á–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç –∂–∞–ª–æ–±—ã

üîç –ü–†–û–í–ï–†–ö–ê –î–û–ö–£–ú–ï–ù–¢–û–í:
‚Ä¢ –ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
‚Ä¢ –ü–æ–ª—É—á–∏—Ç–µ –∑–∞–º–µ—á–∞–Ω–∏—è –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
‚Ä¢ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º

üé§ –ì–û–õ–û–°–û–í–´–ï –°–û–û–ë–©–ï–ù–ò–Ø:
‚Ä¢ –û—Ç–ø—Ä–∞–≤—å—Ç–µ –≥–æ–ª–æ—Å–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–∏—Ç—É–∞—Ü–∏–∏
‚Ä¢ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 5 –º–∏–Ω—É—Ç
‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏ (Whisper-1)
‚Ä¢ –†–µ–∑—É–ª—å—Ç–∞—Ç –∞–Ω–∞–ª–æ–≥–∏—á–µ–Ω —Ç–µ–∫—Å—Ç–æ–≤–æ–º—É –∑–∞–ø—Ä–æ—Å—É

üì§ –ü–û–î–ï–õ–ò–¢–¨–°–Ø –ë–û–¢–û–ú:
‚Ä¢ –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É –∫–æ–ª–ª–µ–≥–∞–º
‚Ä¢ –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è—Ö –±–æ—Ç–∞

üí° –°–û–í–ï–¢–´:
‚Ä¢ –ë—É–¥—å—Ç–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã –≤ –æ–ø–∏—Å–∞–Ω–∏–∏
‚Ä¢ –£–∫–∞–∑—ã–≤–∞–π—Ç–µ –≤—Å–µ –∑–Ω–∞—á–∏–º—ã–µ –æ–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤–∞
‚Ä¢ –ó–∞–≥—Ä—É–∂–∞–π—Ç–µ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
‚Ä¢ –ì–æ–≤–æ—Ä–∏—Ç–µ —á–µ—Ç–∫–æ –≤ –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö""",
        
        "share": """–£–≤–∞–∂–∞–µ–º—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –±–ª–∞–≥–æ–¥–∞—Ä–∏–º –í–∞—Å –∑–∞ –ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–∞—à–∏–º –±–æ—Ç–æ–º.

üì± –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —é—Ä–∏—Å—Ç–æ–≤ –∏ –∞–¥–≤–æ–∫–∞—Ç–æ–≤
¬´–ö–∞–ª–µ–Ω–¥–∞—Ä—å –Æ—Ä–∏—Å—Ç–∞¬ª

–ö–æ–Ω—Ç—Ä–æ–ª—å –≤—Å–µ—Ö –¥–µ–ª –∏ —Å—Ä–æ–∫–æ–≤ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ:
‚úÖ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ —Å—Ä–æ–∫–∞—Ö
‚úÖ –£—á—ë—Ç –¥–µ–ª –∏ –∫–ª–∏–µ–Ω—Ç–æ–≤
‚úÖ –î–æ—Å—Ç—É–ø –∫ —Å—É–¥–µ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
‚úÖ –£–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

üîó üì• –°–ö–ê–ß–ê–¢–¨ –ü–†–ò–õ–û–ñ–ï–ù–ò–ï

–í—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é:""",
        
        "error": "‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ –∏–ª–∏ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É.",
        "file_too_large": "‚ùå –§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 50 –ú–ë",
        "unsupported_format": "‚ùå –ù–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è: PDF, DOCX, TXT",
        "processing": "‚è≥ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é –≤–∞—à –∑–∞–ø—Ä–æ—Å...",
        "uploading": "üìÅ –ó–∞–≥—Ä—É–∂–∞—é –¥–æ–∫—É–º–µ–Ω—Ç...",
        "analyzing": "üîç –ê–Ω–∞–ª–∏–∑–∏—Ä—É—é –¥–æ–∫—É–º–µ–Ω—Ç...",
        "voice_processing": "üé§ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é –≥–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...",
        "voice_transcribing": "üìù –†–∞—Å–ø–æ–∑–Ω–∞—é —Ä–µ—á—å —á–µ—Ä–µ–∑ Whisper-1...",
        "voice_analyzing": "üîç –ê–Ω–∞–ª–∏–∑–∏—Ä—É—é —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç..."
    }

    @classmethod
    def validate(cls):
        """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏"""
        if not cls.BOT_TOKEN:
            raise ValueError("BOT_TOKEN –Ω–µ –∑–∞–¥–∞–Ω –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏")
        
        if not cls.OPENAI_API_KEY:
            raise ValueError("OPENAI_API_KEY –Ω–µ –∑–∞–¥–∞–Ω –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏")
            
        if not cls.PERPLEXITY_API_KEY:
            raise ValueError("PERPLEXITY_API_KEY –Ω–µ –∑–∞–¥–∞–Ω –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏")
        
        # –°–æ–∑–¥–∞–µ–º –ø–∞–ø–∫—É –¥–ª—è –∑–∞–≥—Ä—É–∑–æ–∫ –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
        if not os.path.exists(cls.UPLOAD_DIR):
            os.makedirs(cls.UPLOAD_DIR)
            
        return True

    @classmethod 
    def setup_logging(cls):
        """–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ"""
        logging.basicConfig(
            level=cls.LOG_LEVEL,
            format=cls.LOG_FORMAT,
            handlers=[
                logging.StreamHandler(),
                logging.FileHandler('bot.log', encoding='utf-8')
            ]
        ) 